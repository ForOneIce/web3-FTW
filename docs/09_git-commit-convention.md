# Git Commit 规范

为了保持仓库的提交历史清晰、统一，我们采用 [Conventional Commits](https://www.conventionalcommits.org/) 规范来格式化提交信息。这有助于自动化生成更新日志，并让团队成员更容易理解每次提交的目的。

## 提交信息格式

基本格式如下：

```
<类型>[可选的作用域]: <描述>

[可选的正文]

[可选的脚注]
```

### 类型

提交类型必须是以下之一：

- **feat**: 新功能
- **fix**: 修复bug
- **docs**: 文档更改
- **style**: 不影响代码含义的更改（空格、格式化、缺少分号等）
- **refactor**: 既不修复错误也不添加功能的代码更改
- **perf**: 改进性能的代码更改
- **test**: 添加或修正测试
- **chore**: 对构建过程或辅助工具和库的更改（如文档生成）
- **ci**: 对CI配置文件和脚本的更改
- **revert**: 撤销之前的提交

### 作用域

作用域是可选的，用于指定更改的范围。对于本项目，建议的作用域包括：

- **frontend**: 前端部分的更改
- **contract**: 智能合约部分的更改
- **docs**: 文档的更改
- **config**: 配置文件的更改

### 描述

描述应该简洁清晰地说明本次提交的内容，遵循以下规则：
- 使用现在时态的动词开头，如"更改"、"添加"、"修复"等
- 第一个字母不要大写
- 结尾不要使用句号

### 示例

```
feat(frontend): 添加首页语言切换功能

添加全局语言上下文，实现多语言切换功能。
解决了导航栏和首页组件间语言状态不同步的问题。

Closes #123
```

## 当前项目建议的提交

根据项目当前状态，以下是一些可能的提交示例：

1. 初始化项目结构：
```
feat: 初始化项目基础架构

- 创建前端React应用
- 添加基础文档结构
- 配置基本开发环境
```

2. 前端首页实现：
```
feat(frontend): 实现网站首页

根据设计要求实现动态阶梯背景和方形按钮导航。
添加钱包连接模态框和多语言支持。
```

3. 添加文档：
```
docs: 添加项目文档和开发规范

包括项目概述、功能路线图、前端交互设计、
测试策略和部署计划等内容。
```

4. .gitignore更新：
```
chore: 更新.gitignore文件

添加前端项目相关的忽略规则，包括node_modules、
构建文件、日志文件和IDE配置等。
```

## 多模块变更

当一次提交涉及多个模块时，有两种处理方式：

1. **多次提交**：将更改分解为多个逻辑上独立的提交，每个提交专注于一个特定的更改。

2. **合并提交**：如果更改是紧密相关的，可以使用以下格式：
```
feat: 实现用户认证流程

- 添加前端登录表单和验证
- 实现钱包连接和签名验证
- 添加用户认证相关的智能合约函数
```

## 使用工具辅助规范提交

推荐使用以下工具来帮助规范化提交：

1. **commitizen**：交互式命令行工具，帮助格式化提交信息
   ```
   npm install -g commitizen
   npm install --save-dev cz-conventional-changelog
   ```
   
   在package.json中添加：
   ```json
   "config": {
     "commitizen": {
       "path": "cz-conventional-changelog"
     }
   }
   ```
   
   然后使用`git cz`替代`git commit`

2. **husky + commitlint**：在提交前验证提交信息是否符合规范
   ```
   npm install --save-dev husky @commitlint/cli @commitlint/config-conventional
   ```

## Git提交流程建议

1. **频繁小批量提交**：每完成一个小功能或修复一个bug就提交，避免大批量更改一次提交
2. **先拉取后推送**：推送前先拉取最新代码，避免冲突
3. **保持提交的原子性**：每次提交应该只做一件事
4. **提交前自测**：确保代码可以正常运行后再提交
5. **定期合并主分支**：如果在特性分支上开发，定期将主分支合并到特性分支 